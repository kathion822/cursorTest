{"version":3,"file":"my.js","sources":["pages/my/my.vue","pages/my/my.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"my-container\">\n\t\t<!-- Áî®Êà∑‰ø°ÊÅØÂå∫Âüü -->\n\t\t<view class=\"user-info-section\" v-if=\"isLogin\">\n\t\t\t<view class=\"avatar-container\" @click=\"goToProfile\">\n\t\t\t\t<image class=\"avatar\" :src=\"userInfo.avatarUrl || '/static/default-avatar.png'\" mode=\"aspectFill\"></image>\n\t\t\t</view>\n\t\t\t<view class=\"user-details\" @click=\"goToProfile\">\n\t\t\t\t<text class=\"username\">{{ userInfo.nickName || userInfo.username || 'Áî®Êà∑' }}</text>\n\t\t\t\t<text class=\"user-id\">ID: {{ userInfo.userId || userInfo.openid || '' }}</text>\n\t\t\t\t<text class=\"login-type\">ÁôªÂΩïÊñπÂºè: {{ getLoginTypeText() }}</text>\n\t\t\t</view>\n\t\t\t<view class=\"logout-btn\" @click=\"handleLogout\">\n\t\t\t\t<text>ÈÄÄÂá∫</text>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- Êú™ÁôªÂΩïÁä∂ÊÄÅ -->\n\t\t<view class=\"login-section\" v-else>\n\t\t\t<view class=\"login-prompt\">\n\t\t\t\t<text class=\"login-text\">ËØ∑ÁôªÂΩï‰ª•‰ΩøÁî®ÂÆåÊï¥ÂäüËÉΩ</text>\n\t\t\t</view>\n\t\t\t<view class=\"login-buttons\">\n\t\t\t\t<button class=\"login-btn primary\" @click=\"goToLogin\">\n\t\t\t\t\t<text class=\"login-icon\">üîë</text>\n\t\t\t\t\t<text>ÂéªÁôªÂΩï</text>\n\t\t\t\t</button>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- ÂäüËÉΩËèúÂçï -->\n\t\t<view class=\"menu-section\">\n\t\t\t<view class=\"menu-item\" v-for=\"(item, index) in menuItems\" :key=\"index\" @click=\"handleMenuClick(item)\">\n\t\t\t\t<view class=\"menu-icon\">\n\t\t\t\t\t<text class=\"iconfont\" :class=\"item.icon\"></text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"menu-content\">\n\t\t\t\t\t<text class=\"menu-title\">{{ item.title }}</text>\n\t\t\t\t\t<text class=\"menu-desc\">{{ item.desc }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"menu-arrow\">\n\t\t\t\t\t<text class=\"iconfont icon-arrow-right\"></text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tisLogin: false,\n\t\t\tuserInfo: {},\n\t\t\tloginType: '',\n\t\t\tmenuItems: [\n\t\t\t\t{\n\t\t\t\t\ttitle: '‰∏™‰∫∫ËµÑÊñô',\n\t\t\t\t\tdesc: 'ÁºñËæë‰∏™‰∫∫‰ø°ÊÅØ',\n\t\t\t\t\ticon: 'icon-user',\n\t\t\t\t\taction: 'profile'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'ÊàëÁöÑÊî∂Ëóè',\n\t\t\t\t\tdesc: 'Êü•ÁúãÊî∂ËóèÂÜÖÂÆπ',\n\t\t\t\t\ticon: 'icon-heart',\n\t\t\t\t\taction: 'favorites'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'ËÆæÁΩÆ',\n\t\t\t\t\tdesc: 'Â∫îÁî®ËÆæÁΩÆ',\n\t\t\t\t\ticon: 'icon-settings',\n\t\t\t\t\taction: 'settings'\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: 'ÂÖ≥‰∫éÊàë‰ª¨',\n\t\t\t\t\tdesc: '‰∫ÜËß£Êõ¥Â§ö‰ø°ÊÅØ',\n\t\t\t\t\ticon: 'icon-info',\n\t\t\t\t\taction: 'about'\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t},\n\t\n\tonShow() {\n\t\tthis.checkLoginStatus();\n\t},\n\t\n\tmethods: {\n\t\t// Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ\n\t\tasync checkLoginStatus() {\n\t\t\ttry {\n\t\t\t\tconst userInfo = uni.getStorageSync('userInfo');\n\t\t\t\tconst token = uni.getStorageSync('token');\n\t\t\t\tconst loginType = uni.getStorageSync('loginType');\n\t\t\t\t\n\t\t\t\tif (userInfo && token) {\n\t\t\t\t\tthis.isLogin = true;\n\t\t\t\t\tthis.userInfo = userInfo;\n\t\t\t\t\tthis.loginType = loginType;\n\t\t\t\t} else {\n\t\t\t\t\tthis.isLogin = false;\n\t\t\t\t\tthis.userInfo = {};\n\t\t\t\t\tthis.loginType = '';\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅÂ§±Ë¥•:', error);\n\t\t\t\tthis.isLogin = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// Ëé∑ÂèñÁôªÂΩïÊñπÂºèÊñáÊú¨\n\t\tgetLoginTypeText() {\n\t\t\tconst typeMap = {\n\t\t\t\t'wechat': 'ÂæÆ‰ø°ÁôªÂΩï',\n\t\t\t\t'quick': '‰∏ÄÈîÆÁôªÂΩï',\n\t\t\t\t'password': 'Ë¥¶Âè∑ÂØÜÁ†Å',\n\t\t\t\t'sms': 'ÊâãÊú∫È™åËØÅÁ†Å'\n\t\t\t};\n\t\t\treturn typeMap[this.loginType] || 'Êú™Áü•ÊñπÂºè';\n\t\t},\n\t\t\n\t\t// Ë∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µÈù¢\n\t\tgoToLogin() {\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '/pages/login/login'\n\t\t\t});\n\t\t},\n\t\t\n\t\t// ÈÄÄÂá∫ÁôªÂΩï\n\t\tasync handleLogout() {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: 'Á°ÆËÆ§ÈÄÄÂá∫',\n\t\t\t\tcontent: 'Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü',\n\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// Ë∞ÉÁî®ÈÄÄÂá∫ÁôªÂΩï‰∫ëÂáΩÊï∞\n\t\t\t\t\t\t\tawait uniCloud.callFunction({\n\t\t\t\t\t\t\t\tname: 'logout',\n\t\t\t\t\t\t\t\tdata: { token: uni.getStorageSync('token') }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Ê∏ÖÈô§Êú¨Âú∞Â≠òÂÇ®\n\t\t\t\t\t\t\tuni.removeStorageSync('userInfo');\n\t\t\t\t\t\t\tuni.removeStorageSync('token');\n\t\t\t\t\t\t\tuni.removeStorageSync('loginType');\n\t\t\t\t\t\t\tuni.removeStorageSync('openid');\n\t\t\t\t\t\t\tuni.removeStorageSync('sessionKey');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// Êõ¥Êñ∞È°µÈù¢Áä∂ÊÄÅ\n\t\t\t\t\t\t\tawait this.checkLoginStatus();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: 'Â∑≤ÈÄÄÂá∫ÁôªÂΩï',\n\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error('ÈÄÄÂá∫ÁôªÂΩïÂ§±Ë¥•:', error);\n\t\t\t\t\t\t\t// Âç≥‰Ωø‰∫ëÂáΩÊï∞Ë∞ÉÁî®Â§±Ë¥•Ôºå‰πüË¶ÅÊ∏ÖÈô§Êú¨Âú∞Êï∞ÊçÆ\n\t\t\t\t\t\t\tuni.removeStorageSync('userInfo');\n\t\t\t\t\t\t\tuni.removeStorageSync('token');\n\t\t\t\t\t\t\tuni.removeStorageSync('loginType');\n\t\t\t\t\t\t\tuni.removeStorageSync('openid');\n\t\t\t\t\t\t\tuni.removeStorageSync('sessionKey');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tawait this.checkLoginStatus();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: 'Â∑≤ÈÄÄÂá∫ÁôªÂΩï',\n\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\t// Â§ÑÁêÜËèúÂçïÁÇπÂáª\n\t\thandleMenuClick(item) {\n\t\t\tif (!this.isLogin && item.action !== 'about') {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: 'ËØ∑ÂÖàÁôªÂΩï',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tswitch (item.action) {\n\t\t\t\tcase 'profile':\n\t\t\t\t\tthis.goToProfile();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'favorites':\n\t\t\t\t\tthis.goToFavorites();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'settings':\n\t\t\t\t\tthis.goToSettings();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'about':\n\t\t\t\t\tthis.goToAbout();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// Ë∑≥ËΩ¨ÊñπÊ≥ï\n\t\tgoToProfile() {\n\t\t\tuni.navigateTo({ url: '/pages/profile/profile' });\n\t\t},\n\t\t\n\t\tgoToFavorites() {\n\t\t\tuni.navigateTo({ url: '/pages/favorites/favorites' });\n\t\t},\n\t\t\n\t\tgoToSettings() {\n\t\t\tuni.navigateTo({ url: '/pages/settings/settings' });\n\t\t},\n\t\t\n\t\tgoToAbout() {\n\t\t\tuni.navigateTo({ url: '/pages/about/about' });\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.my-container {\n\tmin-height: 100vh;\n\tbackground-color: #f5f5f5;\n}\n\n.user-info-section {\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\tpadding: 40rpx 30rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tcolor: white;\n\tposition: relative;\n\t\n\t.avatar-container {\n\t\tmargin-right: 30rpx;\n\t\t\n\t\t.avatar {\n\t\t\twidth: 120rpx;\n\t\t\theight: 120rpx;\n\t\t\tborder-radius: 60rpx;\n\t\t\tborder: 4rpx solid rgba(255, 255, 255, 0.3);\n\t\t}\n\t}\n\t\n\t.user-details {\n\t\tflex: 1;\n\t\t\n\t\t.username {\n\t\t\tfont-size: 36rpx;\n\t\t\tfont-weight: bold;\n\t\t\tdisplay: block;\n\t\t\tmargin-bottom: 10rpx;\n\t\t}\n\t\t\n\t\t.user-id {\n\t\t\tfont-size: 24rpx;\n\t\t\topacity: 0.8;\n\t\t\tdisplay: block;\n\t\t\tmargin-bottom: 8rpx;\n\t\t}\n\t\t\n\t\t.login-type {\n\t\t\tfont-size: 22rpx;\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n\t\n\t.logout-btn {\n\t\tposition: absolute;\n\t\ttop: 30rpx;\n\t\tright: 30rpx;\n\t\tbackground: rgba(255, 255, 255, 0.2);\n\t\tpadding: 15rpx 25rpx;\n\t\tborder-radius: 25rpx;\n\t\tborder: 1rpx solid rgba(255, 255, 255, 0.3);\n\t\t\n\t\ttext {\n\t\t\tfont-size: 24rpx;\n\t\t\tcolor: white;\n\t\t}\n\t\t\n\t\t&:active {\n\t\t\tbackground: rgba(255, 255, 255, 0.3);\n\t\t}\n\t}\n}\n\n.login-section {\n\tbackground: white;\n\tpadding: 40rpx 30rpx;\n\ttext-align: center;\n\t\n\t.login-prompt {\n\t\tmargin-bottom: 30rpx;\n\t\t\n\t\t.login-text {\n\t\t\tfont-size: 28rpx;\n\t\t\tcolor: #666;\n\t\t}\n\t}\n\t\n\t.login-buttons {\n\t\t.login-btn {\n\t\t\twidth: 100%;\n\t\t\theight: 80rpx;\n\t\t\tborder-radius: 40rpx;\n\t\t\tfont-size: 28rpx;\n\t\t\tborder: none;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tgap: 20rpx;\n\t\t\t\n\t\t\t&.primary {\n\t\t\t\tbackground: #2867ce;\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t\t\n\t\t\t.login-icon {\n\t\t\t\tfont-size: 32rpx;\n\t\t\t}\n\t\t}\n\t}\n}\n\n.menu-section {\n\tbackground: white;\n\tmargin-top: 20rpx;\n\t\n\t.menu-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 30rpx;\n\t\tborder-bottom: 1rpx solid #f0f0f0;\n\t\t\n\t\t&:last-child {\n\t\t\tborder-bottom: none;\n\t\t}\n\t\t\n\t\t&:active {\n\t\t\tbackground-color: #f8f8f8;\n\t\t}\n\t\t\n\t\t.menu-icon {\n\t\t\twidth: 60rpx;\n\t\t\ttext-align: center;\n\t\t\tmargin-right: 20rpx;\n\t\t\t\n\t\t\t.iconfont {\n\t\t\t\tfont-size: 36rpx;\n\t\t\t\tcolor: #2867ce;\n\t\t\t}\n\t\t}\n\t\t\n\t\t.menu-content {\n\t\t\tflex: 1;\n\t\t\t\n\t\t\t.menu-title {\n\t\t\t\tfont-size: 30rpx;\n\t\t\t\tcolor: #333;\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin-bottom: 8rpx;\n\t\t\t}\n\t\t\t\n\t\t\t.menu-desc {\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: #999;\n\t\t\t}\n\t\t}\n\t\t\n\t\t.menu-arrow {\n\t\t\t.iconfont {\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: #ccc;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import MiniProgramPage from '/Users/clairyang/Downloads/cursor-test/È°πÁõÆÊä•Âëä/pages/my/my.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}