{"version":3,"file":"login.js","sources":["pages/login/login.vue","pages/login/login.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"login-container\">\n\t\t<!-- 页面标题 -->\n\t\t<view class=\"login-header\">\n\t\t\t<text class=\"login-title\">用户登录</text>\n\t\t\t<text class=\"login-subtitle\">选择您喜欢的登录方式</text>\n\t\t</view>\n\t\t\n\t\t<!-- 登录方式选择 -->\n\t\t<view class=\"login-methods\">\n\t\t\t<!-- 微信登录 -->\n\t\t\t<view class=\"login-method-item\" @click=\"handleWechatLogin\">\n\t\t\t\t<view class=\"method-icon wechat\">\n\t\t\t\t\t<text>📱</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"method-info\">\n\t\t\t\t\t<text class=\"method-title\">微信登录</text>\n\t\t\t\t\t<text class=\"method-desc\">快速登录，安全便捷</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"method-arrow\">\n\t\t\t\t\t<text>→</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 一键登录 -->\n\t\t\t<view class=\"login-method-item\" @click=\"handleQuickLogin\">\n\t\t\t\t<view class=\"method-icon quick\">\n\t\t\t\t\t<text>⚡</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"method-info\">\n\t\t\t\t\t<text class=\"method-title\">一键登录</text>\n\t\t\t\t\t<text class=\"method-desc\">无需密码，快速登录</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"method-arrow\">\n\t\t\t\t\t<text>→</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 账号密码登录 -->\n\t\t\t<view class=\"login-method-item\" @click=\"showPasswordLogin = true\">\n\t\t\t\t<view class=\"method-icon password\">\n\t\t\t\t\t<text>🔐</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"method-info\">\n\t\t\t\t\t<text class=\"method-title\">账号密码登录</text>\n\t\t\t\t\t<text class=\"method-desc\">使用用户名和密码登录</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"method-arrow\">\n\t\t\t\t\t<text>→</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 手机验证码登录 -->\n\t\t\t<view class=\"login-method-item\" @click=\"showSmsLogin = true\">\n\t\t\t\t<view class=\"method-icon sms\">\n\t\t\t\t\t<text>📱</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"method-info\">\n\t\t\t\t\t<text class=\"method-title\">手机验证码登录</text>\n\t\t\t\t\t<text class=\"method-desc\">使用手机号和验证码登录</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"method-arrow\">\n\t\t\t\t\t<text>→</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 其他选项 -->\n\t\t<view class=\"login-options\">\n\t\t\t<text class=\"register-link\" @click=\"goToRegister\">还没有账号？立即注册</text>\n\t\t\t<text class=\"forgot-password\" @click=\"goToForgotPassword\">忘记密码？</text>\n\t\t</view>\n\t\t\n\t\t<!-- 测试按钮 -->\n\t\t<view class=\"test-section\">\n\t\t\t<button class=\"test-btn\" @click=\"testJump\">测试跳转</button>\n\t\t</view>\n\t\t\n\t\t<!-- 账号密码登录弹窗 -->\n\t\t<uni-popup ref=\"passwordLoginPopup\" type=\"center\" :mask-click=\"false\">\n\t\t\t<view class=\"login-modal\">\n\t\t\t\t<view class=\"modal-header\">\n\t\t\t\t\t<text class=\"modal-title\">账号密码登录</text>\n\t\t\t\t\t<text class=\"close-btn\" @click=\"showPasswordLogin = false\">×</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-body\">\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<input class=\"input-field\" v-model=\"passwordLoginForm.username\" placeholder=\"请输入用户名/手机号/邮箱\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<input class=\"input-field\" v-model=\"passwordLoginForm.password\" type=\"password\" placeholder=\"请输入密码\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<button class=\"submit-btn\" @click=\"handlePasswordLogin\">登录</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</uni-popup>\n\t\t\n\t\t<!-- 手机验证码登录弹窗 -->\n\t\t<uni-popup ref=\"smsLoginPopup\" type=\"center\" :mask-click=\"false\">\n\t\t\t<view class=\"login-modal\">\n\t\t\t\t<view class=\"modal-header\">\n\t\t\t\t\t<text class=\"modal-title\">手机验证码登录</text>\n\t\t\t\t\t<text class=\"close-btn\" @click=\"showSmsLogin = false\">×</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"modal-body\">\n\t\t\t\t\t<view class=\"input-group\">\n\t\t\t\t\t\t<input class=\"input-field\" v-model=\"smsLoginForm.phone\" placeholder=\"请输入手机号\" />\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"input-group sms-code-group\">\n\t\t\t\t\t\t<input class=\"input-field sms-input\" v-model=\"smsLoginForm.code\" placeholder=\"请输入验证码\" />\n\t\t\t\t\t\t<button class=\"send-code-btn\" :disabled=\"smsCountdown > 0\" @click=\"sendSmsCode\">\n\t\t\t\t\t\t\t{{ smsCountdown > 0 ? `${smsCountdown}s` : '发送验证码' }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</view>\n\t\t\t\t\t<button class=\"submit-btn\" @click=\"handleSmsLogin\">登录</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</uni-popup>\n\t</view>\n</template>\n\n<script>\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tshowPasswordLogin: false,\n\t\t\tshowSmsLogin: false,\n\t\t\tpasswordLoginForm: {\n\t\t\t\tusername: '',\n\t\t\t\tpassword: ''\n\t\t\t},\n\t\t\tsmsLoginForm: {\n\t\t\t\tphone: '',\n\t\t\t\tcode: ''\n\t\t\t},\n\t\t\tsmsCountdown: 0\n\t\t};\n\t},\n\t\n\tmethods: {\n\t\t// 微信登录\n\t\tasync handleWechatLogin() {\n\t\t\ttry {\n\t\t\t\tuni.showLoading({ title: '登录中...' });\n\t\t\t\t\n\t\t\t\t// 获取微信用户信息\n\t\t\t\tconst userInfo = await this.getWechatUserInfo();\n\t\t\t\tif (!userInfo) return;\n\t\t\t\t\n\t\t\t\tconsole.log('获取到微信用户信息:', userInfo);\n\t\t\t\t\n\t\t\t\t// 获取微信登录凭证\n\t\t\t\tconst loginResult = await this.getWechatLoginCode();\n\t\t\t\tconsole.log('微信登录结果:', loginResult);\n\t\t\t\t\n\t\t\t\tif (loginResult.code === 0) {\n\t\t\t\t\t// 显示登录/注册状态\n\t\t\t\t\tconst statusText = loginResult.isNewUser ? '注册并登录中...' : '登录中...';\n\t\t\t\t\tuni.showLoading({ title: statusText });\n\t\t\t\t\t\n\t\t\t\t\t// 统一登录处理\n\t\t\t\t\tconst unifiedResult = await this.handleUnifiedLogin('wechat', {\n\t\t\t\t\t\t...userInfo,\n\t\t\t\t\t\topenid: loginResult.openid,\n\t\t\t\t\t\tsessionKey: loginResult.sessionKey,\n\t\t\t\t\t\tuserId: loginResult.userId,\n\t\t\t\t\t\tisNewUser: loginResult.isNewUser\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif (unifiedResult) {\n\t\t\t\t\t\t// 显示成功消息\n\t\t\t\t\t\tconst successText = loginResult.isNewUser ? '注册并登录成功！' : '登录成功！';\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: successText,\n\t\t\t\t\t\t\ticon: 'success',\n\t\t\t\t\t\t\tduration: 1500\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 立即跳转到个人资料页\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tconsole.log('准备跳转到个人资料页');\n\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\turl: '/pages/profile/profile',\n\t\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\t\tconsole.log('跳转成功');\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\t\tconsole.error('跳转失败:', err);\n\t\t\t\t\t\t\t\t\t// 如果跳转失败，尝试使用navigateTo\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\t\t\t\turl: '/pages/profile/profile',\n\t\t\t\t\t\t\t\t\t\tfail: (err2) => {\n\t\t\t\t\t\t\t\t\t\t\tconsole.error('navigateTo也失败:', err2);\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '页面跳转失败',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: loginResult.message || '微信登录失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('微信登录失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '登录失败，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tuni.hideLoading();\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 获取微信用户信息\n\t\tgetWechatUserInfo() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconsole.log('开始获取微信用户信息...');\n\t\t\t\tconsole.log('当前运行环境:', uni.getSystemInfoSync());\n\t\t\t\t\n\t\t\t\t// 检查是否支持getUserProfile\n\t\t\t\tif (!uni.getUserProfile) {\n\t\t\t\t\tconsole.error('当前环境不支持getUserProfile');\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '当前环境不支持微信登录',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treject(new Error('不支持getUserProfile'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.getUserProfile({\n\t\t\t\t\tdesc: '用于完善用户资料',\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tconsole.log('getUserProfile成功:', res);\n\t\t\t\t\t\tresolve(res.userInfo);\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('getUserProfile失败:', err);\n\t\t\t\t\t\tconsole.error('错误详情:', {\n\t\t\t\t\t\t\terrMsg: err.errMsg,\n\t\t\t\t\t\t\terrCode: err.errCode,\n\t\t\t\t\t\t\tplatform: uni.getSystemInfoSync().platform\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 针对真机的特殊处理\n\t\t\t\t\t\tif (err.errMsg && err.errMsg.includes('deny')) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '用户拒绝授权，请在微信中重新授权',\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\tduration: 3000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '获取用户信息失败',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 获取微信登录凭证\n\t\tgetWechatLoginCode() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconsole.log('开始调用uni.login...');\n\t\t\t\tconsole.log('当前运行环境:', uni.getSystemInfoSync());\n\t\t\t\t\n\t\t\t\t// 检查是否支持uni.login\n\t\t\t\tif (!uni.login) {\n\t\t\t\t\tconsole.error('当前环境不支持uni.login');\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '当前环境不支持微信登录',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treject(new Error('不支持uni.login'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tuni.login({\n\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\tsuccess: async (loginRes) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconsole.log('uni.login成功:', loginRes);\n\t\t\t\t\t\t\tconsole.log('登录code长度:', loginRes.code ? loginRes.code.length : 0);\n\t\t\t\t\t\t\tconsole.log('登录code前10位:', loginRes.code ? loginRes.code.substring(0, 10) + '***' : 'null');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconsole.log('开始调用微信登录云函数...');\n\t\t\t\t\t\t\tconst result = await uniCloud.callFunction({\n\t\t\t\t\t\t\t\tname: 'wechat-login',\n\t\t\t\t\t\t\t\tdata: { code: loginRes.code }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconsole.log('微信登录云函数返回结果:', result);\n\t\t\t\t\t\t\tconsole.log('云函数result字段:', result.result);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (result.result && result.result.code === 0) {\n\t\t\t\t\t\t\t\tresolve(result.result);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconsole.error('微信登录云函数返回错误:', result.result);\n\t\t\t\t\t\t\t\treject(new Error(result.result ? result.result.message : '微信登录失败'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error('调用云函数失败:', error);\n\t\t\t\t\t\t\tconsole.error('错误详情:', {\n\t\t\t\t\t\t\t\tmessage: error.message,\n\t\t\t\t\t\t\t\tstack: error.stack,\n\t\t\t\t\t\t\t\tplatform: uni.getSystemInfoSync().platform\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (error) => {\n\t\t\t\t\t\tconsole.error('uni.login失败:', error);\n\t\t\t\t\t\tconsole.error('登录失败详情:', {\n\t\t\t\t\t\t\terrMsg: error.errMsg,\n\t\t\t\t\t\t\terrCode: error.errCode,\n\t\t\t\t\t\t\tplatform: uni.getSystemInfoSync().platform\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 针对真机的特殊处理\n\t\t\t\t\t\tif (error.errMsg && error.errMsg.includes('deny')) {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '用户拒绝登录，请在微信中重新授权',\n\t\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\t\tduration: 3000\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '微信登录失败',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 一键登录\n\t\tasync handleQuickLogin() {\n\t\t\ttry {\n\t\t\t\tuni.showLoading({ title: '登录中...' });\n\t\t\t\t\n\t\t\t\t// 调用一键登录云函数\n\t\t\t\tconst result = await uniCloud.callFunction({\n\t\t\t\t\tname: 'quick-login',\n\t\t\t\t\tdata: {}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (result.result.code === 0) {\n\t\t\t\t\tawait this.handleUnifiedLogin('quick', result.result.userInfo);\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: result.result.message || '一键登录失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('一键登录失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '登录失败，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tuni.hideLoading();\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 账号密码登录\n\t\tasync handlePasswordLogin() {\n\t\t\tif (!this.passwordLoginForm.username || !this.passwordLoginForm.password) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入用户名和密码',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\tuni.showLoading({ title: '登录中...' });\n\t\t\t\t\n\t\t\t\tconst result = await uniCloud.callFunction({\n\t\t\t\t\tname: 'password-login',\n\t\t\t\t\tdata: this.passwordLoginForm\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (result.result.code === 0) {\n\t\t\t\t\tawait this.handleUnifiedLogin('password', result.result.userInfo);\n\t\t\t\t\tthis.showPasswordLogin = false;\n\t\t\t\t\tthis.passwordLoginForm = { username: '', password: '' };\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: result.result.message || '登录失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('账号密码登录失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '登录失败，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tuni.hideLoading();\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 发送短信验证码\n\t\tasync sendSmsCode() {\n\t\t\tif (!this.smsLoginForm.phone) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入手机号',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst result = await uniCloud.callFunction({\n\t\t\t\t\tname: 'send-sms-code',\n\t\t\t\t\tdata: { phone: this.smsLoginForm.phone }\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (result.result.code === 0) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '验证码已发送',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t});\n\t\t\t\t\tthis.startSmsCountdown();\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: result.result.message || '发送失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('发送验证码失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '发送失败，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 开始短信倒计时\n\t\tstartSmsCountdown() {\n\t\t\tthis.smsCountdown = 60;\n\t\t\tconst timer = setInterval(() => {\n\t\t\t\tthis.smsCountdown--;\n\t\t\t\tif (this.smsCountdown <= 0) {\n\t\t\t\t\tclearInterval(timer);\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t},\n\t\t\n\t\t// 手机验证码登录\n\t\tasync handleSmsLogin() {\n\t\t\tif (!this.smsLoginForm.phone || !this.smsLoginForm.code) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入手机号和验证码',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\tuni.showLoading({ title: '登录中...' });\n\t\t\t\t\n\t\t\t\tconst result = await uniCloud.callFunction({\n\t\t\t\t\tname: 'sms-login',\n\t\t\t\t\tdata: this.smsLoginForm\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (result.result.code === 0) {\n\t\t\t\t\tawait this.handleUnifiedLogin('sms', result.result.userInfo);\n\t\t\t\t\tthis.showSmsLogin = false;\n\t\t\t\t\tthis.smsLoginForm = { phone: '', code: '' };\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: result.result.message || '登录失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('手机验证码登录失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '登录失败，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tuni.hideLoading();\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 统一登录处理\n\t\tasync handleUnifiedLogin(loginType, userData) {\n\t\t\ttry {\n\t\t\t\tconsole.log('开始统一登录处理:', { loginType, userData });\n\t\t\t\t\n\t\t\t\t// 调用统一登录云函数\n\t\t\t\tconst result = await uniCloud.callFunction({\n\t\t\t\t\tname: 'unified-login',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tloginType,\n\t\t\t\t\t\tuserData\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tconsole.log('统一登录云函数返回结果:', result);\n\t\t\t\t\n\t\t\t\tif (result.result && result.result.code === 0) {\n\t\t\t\t\t// 保存登录信息\n\t\t\t\t\tuni.setStorageSync('userInfo', result.result.userInfo);\n\t\t\t\t\tuni.setStorageSync('token', result.result.token);\n\t\t\t\t\tuni.setStorageSync('uid', result.result.userInfo.uid); // 存储uni-id的uid\n\t\t\t\t\tuni.setStorageSync('loginType', loginType);\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('登录信息已保存到本地存储');\n\t\t\t\t\t\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '登录成功',\n\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\treturn true; // 返回成功标志\n\t\t\t\t} else {\n\t\t\t\t\tconst errorMsg = result.result ? result.result.message : '登录失败';\n\t\t\t\t\tconsole.error('统一登录失败:', errorMsg);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: errorMsg || '登录失败',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('统一登录处理失败:', error);\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '登录失败，请重试',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 测试跳转方法\n\t\ttestJump() {\n\t\t\tconsole.log('测试跳转方法被调用');\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '测试跳转',\n\t\t\t\ticon: 'none'\n\t\t\t});\n\t\t\t\n\t\t\t// 尝试跳转\n\t\t\tsetTimeout(() => {\n\t\t\t\tconsole.log('准备跳转到个人资料页');\n\t\t\t\tuni.redirectTo({\n\t\t\t\t\turl: '/pages/profile/profile',\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tconsole.log('跳转成功');\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('跳转失败:', err);\n\t\t\t\t\t\t// 尝试使用navigateTo\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: '/pages/profile/profile',\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\tconsole.log('navigateTo成功');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err2) => {\n\t\t\t\t\t\t\t\tconsole.error('navigateTo也失败:', err2);\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '页面跳转失败',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t},\n\t\t\n\t\t// 跳转方法\n\t\tgoToRegister() {\n\t\t\tuni.navigateTo({ url: '/pages/register/register' });\n\t\t},\n\t\t\n\t\tgoToForgotPassword() {\n\t\t\tuni.navigateTo({ url: '/pages/forgot-password/forgot-password' });\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.login-container {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\tpadding: 40rpx 30rpx;\n}\n\n.login-header {\n\ttext-align: center;\n\tmargin-bottom: 80rpx;\n\tpadding-top: 60rpx;\n\t\n\t.login-title {\n\t\tfont-size: 48rpx;\n\t\tfont-weight: bold;\n\t\tcolor: white;\n\t\tdisplay: block;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.login-subtitle {\n\t\tfont-size: 28rpx;\n\t\tcolor: rgba(255, 255, 255, 0.8);\n\t}\n}\n\n.login-methods {\n\tbackground: white;\n\tborder-radius: 20rpx;\n\tpadding: 20rpx;\n\tmargin-bottom: 40rpx;\n\t\n\t.login-method-item {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 30rpx;\n\t\tborder-bottom: 1rpx solid #f0f0f0;\n\t\t\n\t\t&:last-child {\n\t\t\tborder-bottom: none;\n\t\t}\n\t\t\n\t\t&:active {\n\t\t\tbackground-color: #f8f8f8;\n\t\t}\n\t\t\n\t\t.method-icon {\n\t\t\twidth: 80rpx;\n\t\t\theight: 80rpx;\n\t\t\tborder-radius: 40rpx;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tmargin-right: 30rpx;\n\t\t\tfont-size: 40rpx;\n\t\t\t\n\t\t\t&.wechat {\n\t\t\t\tbackground: #07c160;\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t\t\n\t\t\t&.quick {\n\t\t\t\tbackground: #ff6b35;\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t\t\n\t\t\t&.password {\n\t\t\t\tbackground: #2867ce;\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t\t\n\t\t\t&.sms {\n\t\t\t\tbackground: #ffc107;\n\t\t\t\tcolor: white;\n\t\t\t}\n\t\t}\n\t\t\n\t\t.method-info {\n\t\t\tflex: 1;\n\t\t\t\n\t\t\t.method-title {\n\t\t\t\tfont-size: 32rpx;\n\t\t\t\tcolor: #333;\n\t\t\t\tdisplay: block;\n\t\t\t\tmargin-bottom: 8rpx;\n\t\t\t\tfont-weight: 500;\n\t\t\t}\n\t\t\t\n\t\t\t.method-desc {\n\t\t\t\tfont-size: 24rpx;\n\t\t\t\tcolor: #999;\n\t\t\t}\n\t\t}\n\t\t\n\t\t.method-arrow {\n\t\t\tfont-size: 32rpx;\n\t\t\tcolor: #ccc;\n\t\t}\n\t}\n}\n\n.login-options {\n\ttext-align: center;\n\t\n\t.register-link, .forgot-password {\n\t\tdisplay: block;\n\t\tcolor: rgba(255, 255, 255, 0.9);\n\t\tfont-size: 28rpx;\n\t\tmargin-bottom: 20rpx;\n\t\ttext-decoration: underline;\n\t}\n}\n\n.test-section {\n\tmargin-top: 40rpx;\n\ttext-align: center;\n\t\n\t.test-btn {\n\t\twidth: 100%;\n\t\theight: 80rpx;\n\t\tbackground: #ff6b35;\n\t\tcolor: white;\n\t\tborder: none;\n\t\tborder-radius: 10rpx;\n\t\tfont-size: 30rpx;\n\t}\n}\n\n.login-modal {\n\tbackground: white;\n\tborder-radius: 20rpx;\n\twidth: 600rpx;\n\t\n\t.modal-header {\n\t\tpadding: 30rpx;\n\t\tborder-bottom: 1rpx solid #f0f0f0;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\t\n\t\t.modal-title {\n\t\t\tfont-size: 32rpx;\n\t\t\tfont-weight: bold;\n\t\t\tcolor: #333;\n\t\t}\n\t\t\n\t\t.close-btn {\n\t\t\tfont-size: 40rpx;\n\t\t\tcolor: #999;\n\t\t\tline-height: 1;\n\t\t}\n\t}\n\t\n\t.modal-body {\n\t\tpadding: 30rpx;\n\t\t\n\t\t.input-group {\n\t\t\tmargin-bottom: 30rpx;\n\t\t\t\n\t\t\t&.sms-code-group {\n\t\t\t\tdisplay: flex;\n\t\t\t\tgap: 20rpx;\n\t\t\t\t\n\t\t\t\t.sms-input {\n\t\t\t\t\tflex: 1;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.send-code-btn {\n\t\t\t\t\twidth: 200rpx;\n\t\t\t\t\theight: 80rpx;\n\t\t\t\t\tbackground: #2867ce;\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tborder: none;\n\t\t\t\t\tborder-radius: 10rpx;\n\t\t\t\t\tfont-size: 24rpx;\n\t\t\t\t\t\n\t\t\t\t\t&:disabled {\n\t\t\t\t\t\tbackground: #ccc;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.input-field {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 80rpx;\n\t\t\t\tborder: 1rpx solid #ddd;\n\t\t\t\tborder-radius: 10rpx;\n\t\t\t\tpadding: 0 20rpx;\n\t\t\t\tfont-size: 28rpx;\n\t\t\t\tbox-sizing: border-box;\n\t\t\t}\n\t\t}\n\t\t\n\t\t.submit-btn {\n\t\t\twidth: 100%;\n\t\t\theight: 80rpx;\n\t\t\tbackground: #2867ce;\n\t\t\tcolor: white;\n\t\t\tborder: none;\n\t\t\tborder-radius: 10rpx;\n\t\t\tfont-size: 30rpx;\n\t\t}\n\t}\n}\n</style>\n","import MiniProgramPage from '/Users/clairyang/Downloads/cursor-test/项目报告/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}